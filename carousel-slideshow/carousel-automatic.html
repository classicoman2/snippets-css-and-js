<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel - Automàtic</title>
  <style>
    [data-component="slideshow"] .slide {
      display: none;
      text-align: center;
      cursor:pointer;
    }

    [data-component="slideshow"] .slide.active {
      display: block;
    }
  </style>
</head>

<body>
  <div id="slideshow-example" data-component="slideshow">
    <div role="list">
      <div class="slide">
        <img src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=752&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D"
          alt="">
      </div>
      <div class="slide">
        <img src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?w=750&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D"
          alt="">
      </div>
      <div class="slide">
        <img src="https://images.unsplash.com/photo-1498753427761-548428edfa67?w=889&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D"
          alt="">
      </div>
    </div>
  </div>

</body>

<script>
  // Variables: index i interval
  var index = 0, time = 5000;

  var slideshows = document.querySelectorAll('[data-component="slideshow"]');
  slideshows.forEach(initSlideShow);

  //global variable
  var slides;

  // Control de la rotació automàtica
  function initSlideShow(slideshow) {

    slides = document.querySelectorAll(`#${slideshow.id} [role="list"] .slide`);
    slides[index].classList.add('active');

    setInterval(() => {
      changeSlide(slides)
    }, time);
  }

  //En clicar a sobre, avança una posició
  document.getElementById("slideshow-example").onclick = function () {
    changeSlide(slides)
  }


  function changeSlide(slides) {
    slides[index].classList.remove('active');
      index++;
      if (index === slides.length) {
        index = 0
      }
      slides[index].classList.add('active');

  }

</script>

</html>